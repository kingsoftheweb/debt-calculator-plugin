function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var DebtCalculator=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).elements={singleTabs:document.querySelectorAll(".single-grid-tab"),contentTabs:document.querySelectorAll(".arm_account_detail_tab.arm_account_detail_tab_content"),resultsTabs:document.querySelectorAll("td.arm-form-table-content.tab-has-result .title"),debtInfoMonth:document.querySelectorAll("total-debts-chart .total-debts-chart__main"),addNewButton:document.querySelector(".dcm-shortcode input.submit.add-new-debt"),updateButtons:document.querySelectorAll(".dcm-shortcode input.submit.update-debt"),exportPDFs:document.querySelectorAll(".results-tab a.export-pdf")},e.functions=e.getFunctions(),e.events(),e}return _inherits(t,DCMShortcodes),_createClass(t,[{key:"events",value:function(){var e=this,t=this;window.onload=function(){e.functions.parseUrl()},this.elements.singleTabs.forEach((function(e){e.addEventListener("click",(function(){var n=e.getAttribute("data-id");console.log(t),t.functions.showTab(n),t.functions.updateUrl(n)}))})),this.elements.resultsTabs.forEach((function(e){e.addEventListener("click",(function(){e.parentElement.classList.contains("open")?e.parentElement.classList.remove("open"):(t.elements.resultsTabs.forEach((function(e){e.parentElement.classList.remove("open")})),e.parentElement.classList.add("open"))}))})),this.elements.addNewButton.addEventListener("click",(function(){t.functions.addNewDebt(t.elements.addNewButton)})),this.elements.updateButtons.forEach((function(e){e.addEventListener("click",(function(){t.functions.updateDebt(e)}))})),this.elements.exportPDFs.forEach((function(e){e.addEventListener("click",(function(){var t=e.getAttribute("data-href"),n=document.querySelector('.reports-graphics[data-id="'+e.getAttribute("data-id")+'"]').innerHTML;dcpExportHTML.functions.pdfExport(n,t)}))}))}},{key:"getFunctions",value:function(){var e=this;return{showTab:function(t){e.elements.singleTabs.forEach((function(e){e.classList.remove("active")})),document.querySelector('.single-grid-tab[data-id="'+t+'"]').classList.add("active"),e.elements.contentTabs.forEach((function(e){e.classList.remove("active")})),document.querySelector('.arm_account_detail_tab.arm_account_detail_tab_content[data-tab="'+t+'"]').classList.add("active");var n=parseInt(document.querySelector(".arm-tabs.dcm-wrapper.dcm-shortcode").offsetHeight)+parseInt(document.querySelector(".arm-tabs.dcm-wrapper.dcm-shortcode").offsetTop);window.scrollTo({top:n,left:0,behavior:"smooth"})},parseUrl:function(){var t=new URL(location.href),n=t.searchParams.get("tab"),r=t.searchParams.get("debt_id");return null!==n?(e.functions.showTab(n),r):null},updateUrl:function(e){var t=new URL(location.href);return history.pushState(null,"",t.pathname+"?tab="+e),t.pathname+"?tab="+e},reportsCharts:function(){document.querySelectorAll("canvas.debts-reports.line-chart").forEach((function(e){createChart.functions.drawChart(e,e.getAttribute("data-id"),"line")})),document.querySelectorAll("canvas.debts-reports.doughnut-chart").forEach((function(e){createChart.functions.drawChart(e,e.getAttribute("data-id"),"doughnut")}))},addNewDebt:function(e){var t=e.parentElement.parentElement.parentElement.querySelector('input[name="author_id"]').value,n=e.parentElement.parentElement.parentElement.querySelector('input[name="debt_name"]'),r=e.parentElement.parentElement.querySelector('input[name="debt_amount"]'),o=e.parentElement.parentElement.querySelector('input[name="yearly_interest"]');""===n.value||""===r.value||""===o.value?alert("Fill All Fields please."):jQuery.post(dcp_object.ajaxurl,{action:"add_dcp_debt",debt_title:n.value,debt_amount:r.value,yearly_interest:o.value,author_id:t},(function(e){var t=this.functions.updateUrl("debts-reports&debt_id="+e);location.href=t}))},updateDebt:function(e){var t=e.parentElement.parentElement.querySelector('input[name="debt_id"]').value,n=e.parentElement.parentElement.querySelector('input[name="pay_amount"]'),r=e.parentElement.parentElement.querySelector('input[name="remaining"]').value,o=e.parentElement.parentElement.querySelector('input[name="interest"]').value;""===n?alert("Fill the Amount Field please."):jQuery.post(dcp_object.ajaxurl,{action:"update_dcp_debt",debtID:t,paid:n.value,remaining:r,interest:o},(function(e){var t=this.functions.updateUrl("debts-reports&debt_id="+e);location.href=t}))}}}}]),t}();window.addEventListener("DOMContentLoaded",(function(e){new DebtCalculator}));