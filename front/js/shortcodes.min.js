var dcmShortcodes={debtCalculator:{elements:{singleTabs:document.querySelectorAll(".single-grid-tab"),contentTabs:document.querySelectorAll(".arm_account_detail_tab.arm_account_detail_tab_content"),resultsTabs:document.querySelectorAll("td.arm-form-table-content.tab-has-result .title"),totalDebtInfo:document.querySelectorAll("total-debts-chart .total-debts-chart__main"),addNewButton:document.querySelector(".dcm-shortcode input.submit.add-new-debt"),updateButtons:document.querySelectorAll(".dcm-shortcode input.submit.update-debt"),exportPDFs:document.querySelectorAll(".results-tab a.export-pdf")},events:function(){var e=dcmShortcodes.debtCalculator;window.onload=function(){e.functions.parseUrl(),e.functions.reportsCharts()},e.elements.singleTabs.forEach((function(t){t.addEventListener("click",(function(){var n=t.getAttribute("data-id");e.functions.showTab(n),e.functions.updateUrl(n)}))})),e.elements.resultsTabs.forEach((function(t){t.addEventListener("click",(function(){t.parentElement.classList.contains("open")?t.parentElement.classList.remove("open"):(e.elements.resultsTabs.forEach((function(e){e.parentElement.classList.remove("open")})),t.parentElement.classList.add("open"))}))})),e.elements.addNewButton.addEventListener("click",(function(){e.functions.addNewDebt(e.elements.addNewButton)})),e.elements.updateButtons.forEach((function(t){t.addEventListener("click",(function(){e.functions.updateDebt(t)}))})),e.elements.exportPDFs.forEach((function(e){e.addEventListener("click",(function(){var t=e.getAttribute("data-href"),n=document.querySelector('.reports-graphics[data-id="'+e.getAttribute("data-id")+'"]').innerHTML;dcpExportHTML.functions.pdfExport(n,t)}))}))},functions:{showTab:function(e){dcmShortcodes.debtCalculator.elements.singleTabs.forEach((function(e){e.classList.remove("active")})),document.querySelector('.single-grid-tab[data-id="'+e+'"]').classList.add("active"),dcmShortcodes.debtCalculator.elements.contentTabs.forEach((function(e){e.classList.remove("active")})),document.querySelector('.arm_account_detail_tab.arm_account_detail_tab_content[data-tab="'+e+'"]').classList.add("active");var t=parseInt(document.querySelector(".arm-tabs.dcm-wrapper.dcm-shortcode").offsetHeight)+parseInt(document.querySelector(".arm-tabs.dcm-wrapper.dcm-shortcode").offsetTop);window.scrollTo({top:t,left:0,behavior:"smooth"})},parseUrl:function(){var e=new URL(location.href),t=e.searchParams.get("tab"),n=e.searchParams.get("debt_id");return null!==t?(dcmShortcodes.debtCalculator.functions.showTab(t),n):null},updateUrl:function(e){var t=new URL(location.href);return history.pushState(null,"",t.pathname+"?tab="+e),t.pathname+"?tab="+e},reportsCharts:function(){document.querySelectorAll("canvas.debts-reports.line-chart").forEach((function(e){createChart.functions.drawChart(e,e.getAttribute("data-id"),"line")}));dcmShortcodes.elements.totalDebtInfo.querySelector('input[name="total_debts_info"]').value,dcmShortcodes.elements.totalDebtInfo.querySelector("canvas");createChart.functions.drawChart(canvas,canvas.getAttribute("data-id"),"doughnut"),document.querySelectorAll("canvas.debts-reports.doughnut-chart").forEach((function(e){createChart.functions.drawChart(e,e.getAttribute("data-id"),"doughnut")}))},addNewDebt:function(e){var t=e.parentElement.parentElement.parentElement.querySelector('input[name="author_id"]').value,n=e.parentElement.parentElement.parentElement.querySelector('input[name="debt_name"]'),a=e.parentElement.parentElement.querySelector('input[name="debt_amount"]'),r=e.parentElement.parentElement.querySelector('input[name="yearly_interest"]');""===n.value||""===a.value||""===r.value?alert("Fill All Fields please."):jQuery.post(dcp_object.ajaxurl,{action:"add_dcp_debt",debt_title:n.value,debt_amount:a.value,yearly_interest:r.value,author_id:t},(function(e){var t=dcmShortcodes.debtCalculator.functions.updateUrl("debts-reports&debt_id="+e);location.href=t}))},updateDebt:function(e){var t=e.parentElement.parentElement.querySelector('input[name="debt_id"]').value,n=e.parentElement.parentElement.querySelector('input[name="pay_amount"]'),a=e.parentElement.parentElement.querySelector('input[name="remaining"]').value,r=e.parentElement.parentElement.querySelector('input[name="interest"]').value;""===n?alert("Fill the Amount Field please."):jQuery.post(dcp_object.ajaxurl,{action:"update_dcp_debt",debtID:t,paid:n.value,remaining:a,interest:r},(function(e){var t=dcmShortcodes.debtCalculator.functions.updateUrl("debts-reports&debt_id="+e);location.href=t}))}},init:function(){dcmShortcodes.debtCalculator.events()}}};window.addEventListener("DOMContentLoaded",(function(e){dcmShortcodes.debtCalculator.init()}));